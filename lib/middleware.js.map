{"version":3,"sources":["middleware.js"],"names":[],"mappings":";;;;;;;;;;;;;;IAEqB,UAAU;AAC7B,WADmB,UAAU,GACf;0BADK,UAAU;;AAE3B,QAAI,CAAC,WAAW,GAAG,EAAE,CAAA;GACtB;;eAHkB,UAAU;;wBAKzB,EAAE,EAAE;AACN,UAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;AACzB,aAAO,IAAI,CAAA;KACZ;;;yBAEI,EAAE,EAAE;AACP,UAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAA,IAAI,EAAI;AAC5B,kBAAU,CAAC;iBAAM,EAAE,CAAC,IAAI,CAAC;SAAA,CAAC,CAAA;AAC1B,eAAO,IAAI,CAAA;OACZ,CAAC,CAAA;AACF,aAAO,IAAI,CAAA;KACZ;;;2BAEM;AACL,UAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAC7B,OAAO,MAtBK,IAAI,qCAsBD,IAAI,CAAC,WAAW,EAAC,CAAA;AAClC,aAAO,UAAA,CAAC;eAAI,CAAC;OAAA,CAAA;KACd;;;gCAEW;AACV,UAAI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAC7B,OAAO,MA5BK,IAAI,qCA4BD,IAAI,CAAC,WAAW,EAAC,CAAA;AAClC,aAAO,UAAA,CAAC;eAAI,CAAC;OAAA,CAAA;KACd;;;SA5BkB,UAAU;;;kBAAV,UAAU","file":"middleware.js","sourcesContent":["import { isEmpty, pipe } from './util'\n\nexport default class Middelware {\n  constructor() {\n    this._middleware = []\n  }\n\n  map(fn) {\n    this._middleware.push(fn)\n    return this\n  }\n\n  fork(fn) {\n    this._middleware.push(data => {\n      setTimeout(() => fn(data))\n      return data\n    })\n    return this\n  }\n\n  emit() {\n    if (this._middleware.length > 0)\n      return pipe(...this._middleware)\n    return x => x\n  }\n\n  subscribe() {\n    if (this._middleware.length > 0)\n      return pipe(...this._middleware)\n    return x => x\n  }\n}\n"],"sourceRoot":"/source/"}